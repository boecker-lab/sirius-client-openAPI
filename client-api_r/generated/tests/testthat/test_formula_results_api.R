# Automatically generated by openapi-generator (https://openapi-generator.tech)
# Please update as you see appropriate

context("Test FormulaResultsApi")

api_instance <- FormulaResultsApi$new()
compounds_api <- CompoundsApi$new()
computations_api <- ComputationsApi$new()
data <- "/home/runner/work/sirius-client-openAPI/sirius-client-openAPI/.updater/examples/ms/Bicuculline.ms"
compoundId <- "1_Bicuculline_Bicuculline"
formulaId <- "C20H17NO6_[M+H]+"

test_that("GetBestMatchingCanopusPredictions", {
  # tests for GetBestMatchingCanopusPredictions
  # base path: http://localhost:8080
  # Best matching compound classes,  Set of the highest scoring compound classes CANOPUS) on each hierarchy level of  the ClassyFire and NPC ontology,
  # Best matching compound classes,  Set of the highest scoring compound classes CANOPUS) on each hierarchy level of  the ClassyFire and NPC ontology,
  # @param project_id character project-space to read from.
  # @param compound_id character compound/feature the formula result belongs to.
  # @param formula_id character identifier of the requested formula result
  # @return [CompoundClasses]

  # uncomment below to test the operation
  #expect_equal(result, "EXPECTED_RESULT")
})

test_that("GetCanopusPredictions", {
  # tests for GetCanopusPredictions
  # base path: http://localhost:8080
  # All predicted compound classes (CANOPUS) from ClassyFire and NPC and their probabilities,
  # All predicted compound classes (CANOPUS) from ClassyFire and NPC and their probabilities,
  # @param project_id character project-space to read from.
  # @param compound_id character compound/feature the formula result belongs to.
  # @param formula_id character identifier of the requested formula result
  # @return [CanopusPredictions]

  # uncomment below to test the operation
  #expect_equal(result, "EXPECTED_RESULT")
})

test_that("GetFingerprintPrediction", {
  # tests for GetFingerprintPrediction
  # base path: http://localhost:8080
  # Returns predicted fingerprint (CSI:FingerID) for the given formula result identifier  This fingerprint is used to perfom structure database search and predict compound classes.
  # Returns predicted fingerprint (CSI:FingerID) for the given formula result identifier  This fingerprint is used to perfom structure database search and predict compound classes.
  # @param project_id character project-space to read from.
  # @param compound_id character compound/feature the formula result belongs to.
  # @param formula_id character identifier of the requested formula result
  # @return [array[numeric]]

  # uncomment below to test the operation
  #expect_equal(result, "EXPECTED_RESULT")
})

test_that("GetFormulaIds", {
  # tests for GetFormulaIds
  # base path: http://localhost:8080
  # List of all FormulaResultContainers available for this compound/feature with minimal information.
  # List of all FormulaResultContainers available for this compound/feature with minimal information.  Can be enriched with an optional results overview.
  # @param project_id character project-space to read from.
  # @param compound_id character compound/feature the formula result belongs to.
  # @param result_overview character add ResultOverview to the FormulaResultContainers (optional)
  # @param formula_candidate character add extended formula candidate information to the FormulaResultContainers (optional)
  # @return [array[FormulaResultContainer]]

  # uncomment below to test the operation
  #expect_equal(result, "EXPECTED_RESULT")
})

test_that("GetFormulaResult", {
  # tests for GetFormulaResult
  # base path: http://localhost:8080
  # FormulaResultContainers for the given &#39;formulaId&#39; with minimal information.
  # FormulaResultContainers for the given &#39;formulaId&#39; with minimal information.  Can be enriched with an optional results overview and formula candidate information.
  # @param project_id character project-space to read from.
  # @param compound_id character compound/feature the formula result belongs to.
  # @param formula_id character identifier of the requested formula result
  # @param result_overview character add ResultOverview to the FormulaResultContainer (optional)
  # @param formula_candidate character add extended formula candidate information to the FormulaResultContainer (optional)
  # @return [FormulaResultContainer]

  # uncomment below to test the operation
  #expect_equal(result, "EXPECTED_RESULT")
})

test_that("GetFragTree", {
  # tests for GetFragTree
  # base path: http://localhost:8080
  # Returns fragmentation tree (SIRIUS) for the given formula result identifier  This tree is used to rank formula candidates (treeScore).
  # Returns fragmentation tree (SIRIUS) for the given formula result identifier  This tree is used to rank formula candidates (treeScore).
  # @param project_id character project-space to read from.
  # @param compound_id character compound/feature the formula result belongs to.
  # @param formula_id character identifier of the requested formula result
  # @return [FragmentationTree]

  pid_dir <- new_ps("formRes6", "formResDir6")
    
  compounds_api$ImportCompounds(pid_dir[1], data)
  Sys.sleep(1)
  sub <- computations_api$GetDefaultJobConfig()
  sub$zodiacParas <- NULL
  sub$recompute <- TRUE
  computations_api$PostJobConfig("formRes6", sub, TRUE)
  Sys.sleep(1)
  computations_api$StartJobFromConfig(pid_dir[1], "formRes6", compoundId, TRUE, FALSE, FALSE, FALSE)
  Sys.sleep(3)
  resp <- api_instance$GetFragTree(pid_dir[1], compoundId, formulaId)
  
  expect_equal(is.list(resp$fragments), TRUE)
  expect_equal(is.list(resp$losses), TRUE)
  expect_equal(is.numeric(resp$treeScore), TRUE)
  
  withr::defer(formula_results_td(pid_dir))
})

test_that("GetSimulatedIsotopePattern", {
  # tests for GetSimulatedIsotopePattern
  # base path: http://localhost:8080
  # Returns simulated isotope pattern (SIRIUS) for the given formula result identifier.
  # Returns simulated isotope pattern (SIRIUS) for the given formula result identifier.  This simulated isotope pattern is used to rank formula candidates (treeScore).
  # @param project_id character project-space to read from.
  # @param compound_id character compound/feature the formula result belongs to.
  # @param formula_id character identifier of the requested formula result
  # @return [AnnotatedSpectrum]

  # uncomment below to test the operation
  #expect_equal(result, "EXPECTED_RESULT")
})

test_that("GetStructureCandidates", {
  # tests for GetStructureCandidates
  # base path: http://localhost:8080
  # List of StructureCandidates the given &#39;formulaId&#39; with minimal information.
  # List of StructureCandidates the given &#39;formulaId&#39; with minimal information.  StructureCandidates can be enriched with molecular fingerprint, structure database links and pubmed ids,
  # @param project_id character project-space to read from.
  # @param compound_id character compound/feature the formula result belongs to.
  # @param formula_id character identifier of the requested formula result
  # @param fingerprint character add molecular fingerprint to StructureCandidates (optional)
  # @param db_links character add dbLinks to StructureCandidates (optional)
  # @param pub_med_ids character add PubMedIds (citation count) to StructureCandidates (optional)
  # @param top_k integer retrieve only the top k StructureCandidates (optional)
  # @return [array[StructureCandidate]]

  # uncomment below to test the operation
  #expect_equal(result, "EXPECTED_RESULT")
})

test_that("GetTopStructureCandidate", {
  # tests for GetTopStructureCandidate
  # base path: http://localhost:8080
  # Best Scoring StructureCandidate over all molecular formular resutls that belong to the specified  compound/feature (compoundId).
  # Best Scoring StructureCandidate over all molecular formular resutls that belong to the specified  compound/feature (compoundId).
  # @param project_id character project-space to read from.
  # @param compound_id character compound/feature the formula result belongs to.
  # @param fingerprint character add molecular fingerprint to StructureCandidates (optional)
  # @param db_links character add dbLinks to StructureCandidates (optional)
  # @param pub_med_ids character add PubMedIds (citation count) to StructureCandidates (optional)
  # @return [StructureCandidate]

  # uncomment below to test the operation
  #expect_equal(result, "EXPECTED_RESULT")
})
